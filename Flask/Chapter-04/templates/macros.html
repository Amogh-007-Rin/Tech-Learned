<!--
Macros for Jinja2 Templates
===========================

This file contains reusable macro definitions that can be imported
into other templates using:
{% from 'macros.html' import macro_name %}
-->

<!-- User Card Macro -->
{% macro user_card(user, show_actions=true) %}
<div class="card">
    <div class="card-body">
        <h5 class="card-title">{{ user.name }}</h5>
        <p class="card-text">
            <strong>Email:</strong> {{ user.email }}<br>
            <strong>Age:</strong> {{ user.age }} years<br>
            <strong>City:</strong> {{ user.city }}
        </p>
        
        {% if show_actions %}
            <div class="btn-group" role="group">
                <button class="btn btn-sm btn-outline-primary" onclick="alert('Viewing {{ user.name }}')">
                    View
                </button>
                <button class="btn btn-sm btn-outline-secondary" onclick="alert('Editing {{ user.name }}')">
                    Edit
                </button>
                <button class="btn btn-sm btn-outline-danger" onclick="alert('Deleting {{ user.name }}')">
                    Delete
                </button>
            </div>
        {% endif %}
    </div>
</div>
{% endmacro %}

<!-- Alert Box Macro -->
{% macro alert_box(message, type='info') %}
<div class="alert alert-{{ type }} alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{% endmacro %}

<!-- Button Group Macro -->
{% macro button_group(buttons) %}
<div class="btn-group" role="group">
    {% for button in buttons %}
        <button class="btn {{ button.class }}" 
                {% if button.onclick %}onclick="{{ button.onclick }}"{% endif %}
                {% if button.type %}type="{{ button.type }}"{% endif %}>
            {{ button.text }}
        </button>
    {% endfor %}
</div>
{% endmacro %}

<!-- Form Field Macro -->
{% macro form_field(field, label, placeholder='', help_text='') %}
<div class="mb-3">
    <label for="{{ field }}" class="form-label">{{ label }}</label>
    <input type="text" class="form-control" id="{{ field }}" name="{{ field }}" 
           placeholder="{{ placeholder }}">
    {% if help_text %}
        <div class="form-text">{{ help_text }}</div>
    {% endif %}
</div>
{% endmacro %}

<!-- Table Row Macro -->
{% macro table_row(items, is_header=false) %}
<tr>
    {% for item in items %}
        {% if is_header %}
            <th>{{ item }}</th>
        {% else %}
            <td>{{ item }}</td>
        {% endif %}
    {% endfor %}
</tr>
{% endmacro %}

<!-- Pagination Macro -->
{% macro pagination(current_page, total_pages, base_url) %}
<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        {% if current_page > 1 %}
            <li class="page-item">
                <a class="page-link" href="{{ base_url }}?page={{ current_page - 1 }}">Previous</a>
            </li>
        {% endif %}
        
        {% for page in range(1, total_pages + 1) %}
            <li class="page-item {% if page == current_page %}active{% endif %}">
                <a class="page-link" href="{{ base_url }}?page={{ page }}">{{ page }}</a>
            </li>
        {% endfor %}
        
        {% if current_page < total_pages %}
            <li class="page-item">
                <a class="page-link" href="{{ base_url }}?page={{ current_page + 1 }}">Next</a>
            </li>
        {% endif %}
    </ul>
</nav>
{% endmacro %}

<!-- Breadcrumb Macro -->
{% macro breadcrumb(items) %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        {% for item in items %}
            {% if loop.last %}
                <li class="breadcrumb-item active" aria-current="page">{{ item.text }}</li>
            {% else %}
                <li class="breadcrumb-item">
                    <a href="{{ item.url }}">{{ item.text }}</a>
                </li>
            {% endif %}
        {% endfor %}
    </ol>
</nav>
{% endmacro %}

<!-- Modal Macro -->
{% macro modal(modal_id, title, content, footer_buttons=[]) %}
<div class="modal fade" id="{{ modal_id }}" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{ title }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                {{ content }}
            </div>
            {% if footer_buttons %}
                <div class="modal-footer">
                    {% for button in footer_buttons %}
                        <button type="button" class="btn {{ button.class }}" 
                                {% if button.onclick %}onclick="{{ button.onclick }}"{% endif %}
                                {% if button.dismiss %}data-bs-dismiss="modal"{% endif %}>
                            {{ button.text }}
                        </button>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endmacro %}

<!-- Progress Bar Macro -->
{% macro progress_bar(value, max=100, label='', show_percentage=true) %}
<div class="progress mb-3">
    <div class="progress-bar" role="progressbar" 
         style="width: {{ (value / max * 100)|round(1) }}%"
         aria-valuenow="{{ value }}" aria-valuemin="0" aria-valuemax="{{ max }}">
        {% if show_percentage %}
            {{ (value / max * 100)|round(1) }}%
        {% endif %}
    </div>
</div>
{% if label %}
    <small class="text-muted">{{ label }}</small>
{% endif %}
{% endmacro %}
